/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "(ssr)/./features/image-tools/workers/image-compress.worker.ts":
/*!***************************************************************!*\
  !*** ./features/image-tools/workers/image-compress.worker.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\nconst ctx = self;\nconst postProgress = (id, progress)=>{\n    const message = {\n        id,\n        type: \"progress\",\n        progress\n    };\n    ctx.postMessage(message);\n};\nctx.onmessage = async (event)=>{\n    const payload = event.data;\n    if (payload.type !== \"compress\") {\n        return;\n    }\n    const { id, buffer, mimeType, outputType, quality, maxWidth, maxHeight } = payload;\n    try {\n        if (typeof OffscreenCanvas === \"undefined\") {\n            throw new Error(\"مرورگر شما از OffscreenCanvas پشتیبانی نمی کند.\");\n        }\n        postProgress(id, 0.15);\n        const blob = new Blob([\n            buffer\n        ], {\n            type: mimeType\n        });\n        const bitmap = await createImageBitmap(blob);\n        postProgress(id, 0.4);\n        let targetWidth = bitmap.width;\n        let targetHeight = bitmap.height;\n        if (maxWidth || maxHeight) {\n            const widthRatio = maxWidth ? maxWidth / bitmap.width : 1;\n            const heightRatio = maxHeight ? maxHeight / bitmap.height : 1;\n            const ratio = Math.min(widthRatio, heightRatio, 1);\n            targetWidth = Math.round(bitmap.width * ratio);\n            targetHeight = Math.round(bitmap.height * ratio);\n        }\n        const canvas = new OffscreenCanvas(targetWidth, targetHeight);\n        const context = canvas.getContext(\"2d\");\n        if (!context) {\n            throw new Error(\"امکان ساخت بوم پردازش تصویر وجود ندارد.\");\n        }\n        context.drawImage(bitmap, 0, 0, targetWidth, targetHeight);\n        postProgress(id, 0.7);\n        const normalizedQuality = Math.min(1, Math.max(0.05, quality));\n        const resultBlob = await canvas.convertToBlob({\n            type: outputType,\n            quality: outputType === \"image/png\" ? undefined : normalizedQuality\n        });\n        const resultBuffer = await resultBlob.arrayBuffer();\n        postProgress(id, 1);\n        const response = {\n            id,\n            type: \"result\",\n            buffer: resultBuffer,\n            mimeType: resultBlob.type || outputType,\n            width: targetWidth,\n            height: targetHeight\n        };\n        ctx.postMessage(response, [\n            resultBuffer\n        ]);\n    } catch (error) {\n        const message = error instanceof Error ? error.message : \"خطای ناشناخته در پردازش تصویر.\";\n        const response = {\n            id,\n            type: \"error\",\n            message\n        };\n        ctx.postMessage(response);\n    }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9mZWF0dXJlcy9pbWFnZS10b29scy93b3JrZXJzL2ltYWdlLWNvbXByZXNzLndvcmtlci50cyIsIm1hcHBpbmdzIjoiO0FBc0NBLE1BQU1BLE1BQWtDQztBQUV4QyxNQUFNQyxlQUFlLENBQUNDLElBQVlDO0lBQ2hDLE1BQU1DLFVBQTJCO1FBQUVGO1FBQUlHLE1BQU07UUFBWUY7SUFBUztJQUNsRUosSUFBSU8sV0FBVyxDQUFDRjtBQUNsQjtBQUVBTCxJQUFJUSxTQUFTLEdBQUcsT0FBT0M7SUFDckIsTUFBTUMsVUFBVUQsTUFBTUUsSUFBSTtJQUUxQixJQUFJRCxRQUFRSixJQUFJLEtBQUssWUFBWTtRQUMvQjtJQUNGO0lBRUEsTUFBTSxFQUFFSCxFQUFFLEVBQUVTLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFQyxTQUFTLEVBQUUsR0FBR1A7SUFFM0UsSUFBSTtRQUNGLElBQUksT0FBT1Esb0JBQW9CLGFBQWE7WUFDMUMsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUFqQixhQUFhQyxJQUFJO1FBRWpCLE1BQU1pQixPQUFPLElBQUlDLEtBQUs7WUFBQ1Q7U0FBTyxFQUFFO1lBQUVOLE1BQU1PO1FBQVM7UUFDakQsTUFBTVMsU0FBUyxNQUFNQyxrQkFBa0JIO1FBRXZDbEIsYUFBYUMsSUFBSTtRQUVqQixJQUFJcUIsY0FBY0YsT0FBT0csS0FBSztRQUM5QixJQUFJQyxlQUFlSixPQUFPSyxNQUFNO1FBRWhDLElBQUlYLFlBQVlDLFdBQVc7WUFDekIsTUFBTVcsYUFBYVosV0FBV0EsV0FBV00sT0FBT0csS0FBSyxHQUFHO1lBQ3hELE1BQU1JLGNBQWNaLFlBQVlBLFlBQVlLLE9BQU9LLE1BQU0sR0FBRztZQUM1RCxNQUFNRyxRQUFRQyxLQUFLQyxHQUFHLENBQUNKLFlBQVlDLGFBQWE7WUFDaERMLGNBQWNPLEtBQUtFLEtBQUssQ0FBQ1gsT0FBT0csS0FBSyxHQUFHSztZQUN4Q0osZUFBZUssS0FBS0UsS0FBSyxDQUFDWCxPQUFPSyxNQUFNLEdBQUdHO1FBQzVDO1FBRUEsTUFBTUksU0FBUyxJQUFJaEIsZ0JBQWdCTSxhQUFhRTtRQUNoRCxNQUFNUyxVQUFVRCxPQUFPRSxVQUFVLENBQUM7UUFDbEMsSUFBSSxDQUFDRCxTQUFTO1lBQ1osTUFBTSxJQUFJaEIsTUFBTTtRQUNsQjtRQUVBZ0IsUUFBUUUsU0FBUyxDQUFDZixRQUFRLEdBQUcsR0FBR0UsYUFBYUU7UUFDN0N4QixhQUFhQyxJQUFJO1FBRWpCLE1BQU1tQyxvQkFBb0JQLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLUSxHQUFHLENBQUMsTUFBTXhCO1FBQ3JELE1BQU15QixhQUFhLE1BQU1OLE9BQU9PLGFBQWEsQ0FBQztZQUM1Q25DLE1BQU1RO1lBQ05DLFNBQVNELGVBQWUsY0FBYzRCLFlBQVlKO1FBQ3BEO1FBRUEsTUFBTUssZUFBZSxNQUFNSCxXQUFXSSxXQUFXO1FBQ2pEMUMsYUFBYUMsSUFBSTtRQUVqQixNQUFNMEMsV0FBMEI7WUFDOUIxQztZQUNBRyxNQUFNO1lBQ05NLFFBQVErQjtZQUNSOUIsVUFBVTJCLFdBQVdsQyxJQUFJLElBQUlRO1lBQzdCVyxPQUFPRDtZQUNQRyxRQUFRRDtRQUNWO1FBRUExQixJQUFJTyxXQUFXLENBQUNzQyxVQUFVO1lBQUNGO1NBQWE7SUFDMUMsRUFBRSxPQUFPRyxPQUFPO1FBQ2QsTUFBTXpDLFVBQVV5QyxpQkFBaUIzQixRQUFRMkIsTUFBTXpDLE9BQU8sR0FBRztRQUN6RCxNQUFNd0MsV0FBeUI7WUFBRTFDO1lBQUlHLE1BQU07WUFBU0Q7UUFBUTtRQUM1REwsSUFBSU8sV0FBVyxDQUFDc0M7SUFDbEI7QUFDRjtBQTlHVSIsInNvdXJjZXMiOlsid2VicGFjazovL3BlcnNpYW4tdG9vbHMvLi9mZWF0dXJlcy9pbWFnZS10b29scy93b3JrZXJzL2ltYWdlLWNvbXByZXNzLndvcmtlci50cz9mNjkzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7fTtcblxudHlwZSBDb21wcmVzc1JlcXVlc3QgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdjb21wcmVzcyc7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gIG1pbWVUeXBlOiBzdHJpbmc7XG4gIG91dHB1dFR5cGU6IHN0cmluZztcbiAgcXVhbGl0eTogbnVtYmVyO1xuICBtYXhXaWR0aD86IG51bWJlcjtcbiAgbWF4SGVpZ2h0PzogbnVtYmVyO1xufTtcblxudHlwZSBXb3JrZXJSZXF1ZXN0ID0gQ29tcHJlc3NSZXF1ZXN0O1xuXG50eXBlIFByb2dyZXNzTWVzc2FnZSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ3Byb2dyZXNzJztcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbn07XG5cbnR5cGUgUmVzdWx0TWVzc2FnZSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ3Jlc3VsdCc7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gIG1pbWVUeXBlOiBzdHJpbmc7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufTtcblxudHlwZSBFcnJvck1lc3NhZ2UgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdlcnJvcic7XG4gIG1lc3NhZ2U6IHN0cmluZztcbn07XG5cbnR5cGUgV29ya2VyUmVzcG9uc2UgPSBQcm9ncmVzc01lc3NhZ2UgfCBSZXN1bHRNZXNzYWdlIHwgRXJyb3JNZXNzYWdlO1xuXG5jb25zdCBjdHg6IERlZGljYXRlZFdvcmtlckdsb2JhbFNjb3BlID0gc2VsZiBhcyBEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZTtcblxuY29uc3QgcG9zdFByb2dyZXNzID0gKGlkOiBzdHJpbmcsIHByb2dyZXNzOiBudW1iZXIpID0+IHtcbiAgY29uc3QgbWVzc2FnZTogUHJvZ3Jlc3NNZXNzYWdlID0geyBpZCwgdHlwZTogJ3Byb2dyZXNzJywgcHJvZ3Jlc3MgfTtcbiAgY3R4LnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xufTtcblxuY3R4Lm9ubWVzc2FnZSA9IGFzeW5jIChldmVudDogTWVzc2FnZUV2ZW50PFdvcmtlclJlcXVlc3Q+KSA9PiB7XG4gIGNvbnN0IHBheWxvYWQgPSBldmVudC5kYXRhO1xuXG4gIGlmIChwYXlsb2FkLnR5cGUgIT09ICdjb21wcmVzcycpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB7IGlkLCBidWZmZXIsIG1pbWVUeXBlLCBvdXRwdXRUeXBlLCBxdWFsaXR5LCBtYXhXaWR0aCwgbWF4SGVpZ2h0IH0gPSBwYXlsb2FkO1xuXG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ9mF2LHZiNix2q/YsSDYtNmF2Kcg2KfYsiBPZmZzY3JlZW5DYW52YXMg2b7YtNiq24zYqNin2YbbjCDZhtmF24wg2qnZhtivLicpO1xuICAgIH1cblxuICAgIHBvc3RQcm9ncmVzcyhpZCwgMC4xNSk7XG5cbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2J1ZmZlcl0sIHsgdHlwZTogbWltZVR5cGUgfSk7XG4gICAgY29uc3QgYml0bWFwID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAoYmxvYik7XG5cbiAgICBwb3N0UHJvZ3Jlc3MoaWQsIDAuNCk7XG5cbiAgICBsZXQgdGFyZ2V0V2lkdGggPSBiaXRtYXAud2lkdGg7XG4gICAgbGV0IHRhcmdldEhlaWdodCA9IGJpdG1hcC5oZWlnaHQ7XG5cbiAgICBpZiAobWF4V2lkdGggfHwgbWF4SGVpZ2h0KSB7XG4gICAgICBjb25zdCB3aWR0aFJhdGlvID0gbWF4V2lkdGggPyBtYXhXaWR0aCAvIGJpdG1hcC53aWR0aCA6IDE7XG4gICAgICBjb25zdCBoZWlnaHRSYXRpbyA9IG1heEhlaWdodCA/IG1heEhlaWdodCAvIGJpdG1hcC5oZWlnaHQgOiAxO1xuICAgICAgY29uc3QgcmF0aW8gPSBNYXRoLm1pbih3aWR0aFJhdGlvLCBoZWlnaHRSYXRpbywgMSk7XG4gICAgICB0YXJnZXRXaWR0aCA9IE1hdGgucm91bmQoYml0bWFwLndpZHRoICogcmF0aW8pO1xuICAgICAgdGFyZ2V0SGVpZ2h0ID0gTWF0aC5yb3VuZChiaXRtYXAuaGVpZ2h0ICogcmF0aW8pO1xuICAgIH1cblxuICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXModGFyZ2V0V2lkdGgsIHRhcmdldEhlaWdodCk7XG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfYp9mF2qnYp9mGINiz2KfYrtiqINio2YjZhSDZvtix2K/Yp9iy2LQg2KrYtdmI24zYsSDZiNis2YjYryDZhtiv2KfYsdivLicpO1xuICAgIH1cblxuICAgIGNvbnRleHQuZHJhd0ltYWdlKGJpdG1hcCwgMCwgMCwgdGFyZ2V0V2lkdGgsIHRhcmdldEhlaWdodCk7XG4gICAgcG9zdFByb2dyZXNzKGlkLCAwLjcpO1xuXG4gICAgY29uc3Qgbm9ybWFsaXplZFF1YWxpdHkgPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLjA1LCBxdWFsaXR5KSk7XG4gICAgY29uc3QgcmVzdWx0QmxvYiA9IGF3YWl0IGNhbnZhcy5jb252ZXJ0VG9CbG9iKHtcbiAgICAgIHR5cGU6IG91dHB1dFR5cGUsXG4gICAgICBxdWFsaXR5OiBvdXRwdXRUeXBlID09PSAnaW1hZ2UvcG5nJyA/IHVuZGVmaW5lZCA6IG5vcm1hbGl6ZWRRdWFsaXR5LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0QnVmZmVyID0gYXdhaXQgcmVzdWx0QmxvYi5hcnJheUJ1ZmZlcigpO1xuICAgIHBvc3RQcm9ncmVzcyhpZCwgMSk7XG5cbiAgICBjb25zdCByZXNwb25zZTogUmVzdWx0TWVzc2FnZSA9IHtcbiAgICAgIGlkLFxuICAgICAgdHlwZTogJ3Jlc3VsdCcsXG4gICAgICBidWZmZXI6IHJlc3VsdEJ1ZmZlcixcbiAgICAgIG1pbWVUeXBlOiByZXN1bHRCbG9iLnR5cGUgfHwgb3V0cHV0VHlwZSxcbiAgICAgIHdpZHRoOiB0YXJnZXRXaWR0aCxcbiAgICAgIGhlaWdodDogdGFyZ2V0SGVpZ2h0LFxuICAgIH07XG5cbiAgICBjdHgucG9zdE1lc3NhZ2UocmVzcG9uc2UsIFtyZXN1bHRCdWZmZXJdKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn2K7Yt9in24wg2YbYp9i02YbYp9iu2KrZhyDYr9ixINm+2LHYr9in2LLYtCDYqti12YjbjNixLic7XG4gICAgY29uc3QgcmVzcG9uc2U6IEVycm9yTWVzc2FnZSA9IHsgaWQsIHR5cGU6ICdlcnJvcicsIG1lc3NhZ2UgfTtcbiAgICBjdHgucG9zdE1lc3NhZ2UocmVzcG9uc2UpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbImN0eCIsInNlbGYiLCJwb3N0UHJvZ3Jlc3MiLCJpZCIsInByb2dyZXNzIiwibWVzc2FnZSIsInR5cGUiLCJwb3N0TWVzc2FnZSIsIm9ubWVzc2FnZSIsImV2ZW50IiwicGF5bG9hZCIsImRhdGEiLCJidWZmZXIiLCJtaW1lVHlwZSIsIm91dHB1dFR5cGUiLCJxdWFsaXR5IiwibWF4V2lkdGgiLCJtYXhIZWlnaHQiLCJPZmZzY3JlZW5DYW52YXMiLCJFcnJvciIsImJsb2IiLCJCbG9iIiwiYml0bWFwIiwiY3JlYXRlSW1hZ2VCaXRtYXAiLCJ0YXJnZXRXaWR0aCIsIndpZHRoIiwidGFyZ2V0SGVpZ2h0IiwiaGVpZ2h0Iiwid2lkdGhSYXRpbyIsImhlaWdodFJhdGlvIiwicmF0aW8iLCJNYXRoIiwibWluIiwicm91bmQiLCJjYW52YXMiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsIm5vcm1hbGl6ZWRRdWFsaXR5IiwibWF4IiwicmVzdWx0QmxvYiIsImNvbnZlcnRUb0Jsb2IiLCJ1bmRlZmluZWQiLCJyZXN1bHRCdWZmZXIiLCJhcnJheUJ1ZmZlciIsInJlc3BvbnNlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./features/image-tools/workers/image-compress.worker.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["(ssr)/./features/image-tools/workers/image-compress.worker.ts"](0, __webpack_exports__, __webpack_require__);
/******/ 	module.exports = __webpack_exports__;
/******/ 	
/******/ })()
;