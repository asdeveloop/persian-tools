# استانداردهای پروژه Persian Tools

> آخرین به‌روزرسانی: 2026-02-06

این سند مرجع استانداردهای فنی و طراحی پروژه است و باید مبنای کدنویسی، طراحی UI و تصمیم‌های محصول قرار گیرد.

## 1) اصول بنیادین

- **Local‑first**: همه پردازش‌ها تا حد امکان در مرورگر انجام شود.
- **بدون وابستگی خارجی در runtime**: عدم استفاده از CDN و سرویس‌های ثالث برای عملکرد اصلی.
- **RTL و فارسی‌محور**: همه اجزا باید با متن فارسی و راست‌به‌چپ سازگار باشند.
- **حریم خصوصی پیش‌فرض**: جمع‌آوری داده فقط با رضایت شفاف کاربر.
- **مستندسازی قبل از تغییرات بزرگ**: تغییرات کلیدی ابتدا در docs ثبت شوند.

## 2) استانداردهای فنی

### TypeScript و کیفیت کد

- `strict` باید فعال باشد و استفاده از `any` ممنوع است مگر با توضیح ضروری.
- توابع باید ورودی/خروجی مشخص و قابل تست داشته باشند.
- ماژول‌ها باید کوچک و قابل استفاده مجدد باشند.

### ساختار پروژه

- `app/` برای روتینگ و صفحات.
- `components/` برای اجزای عمومی.
- `features/` برای منطق ابزارها.
- `shared/` برای توابع و هسته مشترک.

### وابستگی‌ها

- در runtime هیچ وابستگی خارجی (CDN/اسکریپت خارجی) مجاز نیست.
- وابستگی‌های dev باید کم و قابل توجیه باشند.

## 3) طراحی و UI/UX

### طراحی سیستمی

- استفاده از توکن‌های طراحی در `shared/constants/tokens.ts`.
- رنگ‌ها، فونت‌ها و فاصله‌ها باید فقط از توکن‌ها گرفته شوند.

### تایپوگرافی و فاصله‌گذاری

- فونت اصلی داخلی (IRANSansX یا جایگزین self-hosted).
- مقیاس فاصله‌گذاری بر اساس 4px.
- استفاده از کلاس‌های منطقی `start/end` به جای `left/right` برای RTL.

### موشن و انیمیشن

- انیمیشن‌ها باید ساده، سبک و CSS‑based باشند.
- رعایت `prefers-reduced-motion` الزامی است.

## 4) دسترس‌پذیری (WCAG 2.1 AA)

- همه فرم‌ها و اجزا باید `aria` مناسب داشته باشند.
- تصاویر باید `alt` مناسب داشته باشند.
- ناوبری با کیبورد باید برای مسیرهای اصلی کامل باشد.
- کنتراست رنگی باید حداقل AA باشد.

## 5) SEO و محتوا

- متادیتا و OG برای همه ابزارها الزامی است.
- داده‌های ساخت‌یافته (schema.org/SoftwareApplication) باید فعال باشد.
- صفحات Pillar برای دسته‌های اصلی (`/topics`) نگهداری شوند.

## 6) PWA و آفلاین

- ثبت `Service Worker` در `/sw.js`.
- صفحه آفلاین `/offline` باید همیشه در دسترس باشد.
- افزایش `CACHE_VERSION` برای هر انتشار جدید ضروری است.

## 7) امنیت و حریم خصوصی

- CSP سخت‌گیرانه و استفاده از nonce برای JSON‑LD.
- تبلیغات و تحلیل‌گر فقط پس از رضایت کاربر.
- هیچ داده‌ای بدون رضایت کاربر ارسال نشود.

## 8) تست و کیفیت

- حداقل پوشش تست برای ابزارهای اصلی باید ≥ 85% باشد.
- تست‌های E2E برای مسیرهای آفلاین و سناریوهای حیاتی الزامی است.

## 9) مستندسازی و مشارکت

- تغییرات بزرگ باید در `docs/` ثبت شوند.
- هر ابزار جدید باید راهنمای استفاده و مثال داشته باشد.
- به‌روزرسانی‌های مهم در README یا CHANGELOG منعکس شود.

## 10) مهارت‌ها و نقش‌ها

- راهنمای عملیاتی تیم در `SKILL.md` تعریف شده است.
- نقش‌ها و مسئولیت‌ها در `skill.toml` ثبت شده‌اند.

---

## ضمیمه: نگاشت استانداردها به مسیرهای اصلی

| حوزه          | مسیرهای کلیدی                                                    | آنچه باید رعایت شود                         |
| ------------- | ---------------------------------------------------------------- | ------------------------------------------- |
| Architecture  | `app/`, `features/`, `shared/`                                   | جداسازی مسئولیت، ماژول‌های کوچک و قابل تست  |
| Design Tokens | `shared/constants/tokens.ts`                                     | تمام رنگ/فاصله/فونت از توکن‌ها              |
| Motion        | `shared/ui/SimpleAnimations.tsx`, `shared/ui/LoadingSpinner.tsx` | انیمیشن سبک، رعایت `prefers-reduced-motion` |
| UI Components | `components/`, `shared/ui/`                                      | استفاده از کلاس‌های منطقی RTL و دسترس‌پذیری |
| SEO           | `app/`, `lib/`, `features/`                                      | متادیتا و JSON‑LD برای صفحات ابزار          |
| PWA           | `public/sw.js`, `app/manifest.ts`                                | چرخه آپدیت، صفحه آفلاین، نسخه کش            |
| Security      | `middleware.ts`, `shared/consent/`                               | CSP سخت‌گیرانه، رضایت تبلیغات/تحلیل‌گر      |
| Docs          | `README.md`, `docs/`                                             | هم‌راستایی مستندات با رفتار واقعی           |
