# نقشه آماده‌سازی استقرار (Deploy Readiness Roadmap)

> آخرین به‌روزرسانی: 2026-02-06

این سند یک چک‌لیست عملیاتی برای آماده‌سازی استقرار Persian Tools است؛ از خرید دامنه و انتخاب هاست تا تنظیمات DNS، محیط اجرا، پایگاه داده و محتوای اولیه.

## 1) انتخاب دامنه

### دامنه ملی (.ir)

- برای ثبت دامنه ملی باید **شناسه ایرنیک (NIC Handle)** بسازید و فرایند ثبت را از طریق پنل ایرنیک یا نمایندگان انجام دهید. citeturn0search1turn0search4turn0search8turn0search9turn0search11
- پیشنهاد: دامنه اصلی `.ir` + دامنه جایگزین `.com` برای دسترس‌پذیری بین‌المللی.

### نکات انتخاب نام

- کوتاه، تلفظ‌پذیر، بدون کاراکترهای پیچیده.
- یکسان با نام برند (Persian Tools).

## 2) انتخاب نوع میزبانی

### گزینه‌های میزبانی رایج در ایران

- **PaaS برای Next.js**: لیارا مستندات رسمی برای استقرار Next.js و ساخت برنامه ارائه می‌دهد و شروع سریع را ساده می‌کند. citeturn0search0turn0search2turn0search7
- **VPS ایران**: برای کنترل کامل زیرساخت و محدودیت کمتر، VPS داخلی گزینه استاندارد است. نمونه VPS داخلی از لیارا قابل تهیه است. citeturn0search3turn0search5

### معیارهای انتخاب (حتی اگر ارائه‌دهنده دیگری انتخاب شود)

- SSD/NVMe، آپتایم ≥ 99.9%
- بکاپ دوره‌ای و بازیابی آسان
- پشتیبانی 24/7
- موقعیت سرور ایران برای کاربران داخل

## 3) آماده‌سازی DNS و دامنه

- تعریف رکوردهای اصلی (A/AAAA/CNAME) برای دامنه و زیردامنه‌ها.
- فعال‌سازی HTTPS (گواهی SSL).
- اتصال دامنه به سرویس (در PaaS معمولاً از پنل انجام می‌شود).

## 4) پیکربندی محیط اجرا (Env)

- حداقل متغیرها:
  - `NEXT_PUBLIC_SITE_URL`
  - `DATABASE_URL` (در صورت فعال بودن اشتراک/تاریخچه)
  - `NEXT_PUBLIC_ANALYTICS_ID` (اختیاری)
  - `ANALYTICS_INGEST_SECRET` (اختیاری)
- در محیط production، تحلیل‌گر فقط پس از رضایت کاربر فعال شود.

## 5) پایگاه داده و ذخیره‌سازی

- اگر قابلیت‌های اشتراک/تاریخچه فعال شود، PostgreSQL مورد نیاز است.
- بکاپ‌گیری منظم و سیاست retention تعریف شود.

## 6) آماده‌سازی محتوا و دارایی‌ها

- لوگو (SVG/PNG) و نسخه‌های مناسب برای OG و آیکن‌ها.
- تصاویر OG برای ابزارهای کلیدی (با `pnpm generate:og`).
- محتوای صفحات Pillar و معرفی ابزارها (SEO).

## 7) امنیت و انطباق

- CSP سخت‌گیرانه و nonce برای JSON‑LD.
- Opt‑in برای تبلیغات و تحلیل‌گر.
- تست مسیرهای آفلاین و خطاهای RTL.

## 8) تست و انتشار

- اجرای `pnpm ci:quick`.
- تست E2E برای مسیرهای حیاتی و PWA.
- مانیتورینگ ساده: لاگ‌ها + آلارم پایه.

## 9) پس از انتشار

- بررسی Healthcheck و زمان پاسخ.
- بررسی Core Web Vitals و Lighthouse.
- پایش خطاهای کاربری و بهبود UX.

## نسخه گرافیکی

- بورد مدیریتی: `docs/deployment-roadmap.html`
- مسیر داخلی اپ: `/deployment-roadmap`
