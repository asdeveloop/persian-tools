# PROJECT_STANDARDS — استانداردهای پروژه و راهنمای UI/UX

> **نام پروژه:** Persian Tools (جعبه ابزار فارسی)  
> **هدف سند:** قوانین غیرقابل مذاکره + راهنمای طراحی یکپارچه UI/UX + استانداردهای فنی، تست و انتشار.  
> **آخرین به‌روزرسانی:** 2026-02-01

---

## فهرست

1. [دامنه و مخاطب](#دامنه-و-مخاطب)
2. [حاکمیت و نحوه تغییر](#حاکمیت-و-نحوه-تغییر)
3. [اصول غیرقابل مذاکره](#اصول-غیرقابل-مذاکره)
4. [لوکال‌بودن، فارسی‌بودن و سازگاری با تحریم‌ها](#لوکال‌بودن-فارسی‌بودن-و-سازگاری-با-تحریم‌ها)
5. [Design System](#design-system)
6. [کامپوننت‌ها و الگوهای UI](#کامپوننت‌ها-و-الگوهای-ui)
7. [تعامل، انیمیشن و Motion](#تعامل-انیمیشن-و-motion)
8. [Responsive و Mobile-first](#responsive-و-mobile-first)
9. [دسترسی‌پذیری](#دسترسی‌پذیری)
10. [استانداردهای فنی](#استانداردهای-فنی)
11. [امنیت، حریم خصوصی و داده](#امنیت-حریم-خصوصی-و-داده)
12. [تست، کیفیت و تعریف Done](#تست-کیفیت-و-تعریف-done)
13. [چک‌لیست بازبینی PR](#چک‌لیست-بازبینی-pr)
14. [پیوست‌ها](#پیوست‌ها)

---

## دامنه و مخاطب

این سند برای طراحان، توسعه‌دهندگان UI/UX، نگهدارندگان داکیومنت، توسعه‌دهندگان بسته‌های wrapper، QA و مدیران پروژه تهیه شده است.  
هدف: یکپارچگی تجربه کاربری در تمام بسته‌ها + کیفیت فنی قابل اتکا + قابلیت نگهداری در بلندمدت.

---

## حاکمیت و نحوه تغییر

- این سند **مرجع واحد** استانداردهای پروژه است.
- هر تغییر باید با PR جداگانه و توضیح روشن انجام شود.
- در صورت تعارض بین این سند و سایر اسناد، **این سند اولویت دارد** مگر خلاف آن صریحا ذکر شده باشد.

---

## اصول غیرقابل مذاکره

این موارد قانون هستند و باید در تمام بسته‌ها و وب‌سایت/داکیومنت رعایت شوند:

- **زبان UI و محتوا فارسی** + پشتیبانی کامل از RTL.
- **لوکال‌محور**: هیچ منبع اجرایی در runtime نباید به سرویس خارجی وابسته باشد.
- **دسترسی‌پذیری**: حداقل WCAG AA برای مسیرهای اصلی.
- **کیفیت کد**: TypeScript با `strict: true` و بدون `any` (جز موارد توجیه‌شده).
- **تست ضروری است**: هر بخش حیاتی (حتی utility و validation) تست قابل‌اعتماد دارد.
- **عملکرد**: سبک، سریع، بدون وابستگی‌های سنگین و غیرضروری.
- **شفافیت داده**: هیچ فایل کاربر به خارج ارسال نمی‌شود مگر با رضایت صریح.

---

## لوکال‌بودن، فارسی‌بودن و سازگاری با تحریم‌ها

### زبان و محتوا

- **زبان UI:** فارسی.
- **فونت:** فقط از **IRANSansX** که داخل پروژه قرار دارد استفاده شود (بدون فونت خارجی).
- **جهت:** همهٔ صفحات و کامپوننت‌ها RTL.
- **عددنویسی:** نمایش با ارقام فارسی (۰–۹) و جداسازی هزارگان.
- **تاریخ/زمان:** اگر تاریخ نمایش داده می‌شود، نوع آن (شمسی/میلادی) مشخص باشد و امکان شمسی فراهم شود.

### ممنوعیت وابستگی خارجی

> منظور از «وابستگی خارجی»: هر چیزی که در زمان اجرای محصول نیاز به اتصال به دامنه/سرویس خارجی داشته باشد.

- CDN برای JS/CSS/Font/Icons ممنوع
- Google Fonts یا هر فونت ریموت ممنوع
- تحلیل‌گر خارجی ممنوع مگر نسخه self-host و تصویب رسمی
- هر API خارجی برای کارکردهای اصلی ممنوع مگر با نسخه self-host و تایید صریح پروژه

### سازگاری با تحریم‌ها

- هر feature باید حتی در صورت محدودیت دسترسی به سرویس‌های بین‌المللی کار کند.
- اگر استفاده از سرویس خارجی اجتناب‌ناپذیر است:
  1. **جایگزین لوکال** داشته باشد
  2. پشت Feature Flag باشد
  3. در مستندات «ریسک تحریم» ثبت شود

---

## Design System

### توکن‌ها

تمام UI باید روی توکن‌ها سوار شود تا تغییر تم/ظاهر بدون دست‌کاری همهٔ کامپوننت‌ها ممکن باشد.

**فرمت پیشنهادی:** CSS Variables + فایل TypeScript (برای استفاده در JS/TS).

حداقل توکن‌های لازم:

- Colors (semantic)
- Spacing
- Typography
- Radius/Shadow
- Motion/Easing

> قانون: رنگ «primary» فقط برای CTA و نقاط تاکید استفاده شود.

---

### رنگ‌ها

#### اصل‌ها

- رنگ‌ها باید **Semantic** باشند، نه صرفا «آبی/سبز/قرمز».
- کنتراست متن روی پس‌زمینه حداقل AA را پاس کند.
- در طراحی RTL از `start/end` استفاده شود (نه left/right).

#### پالت پایه

- **Background**: `bg`، `bg-subtle`
- **Surface**: `surface-1`، `surface-2`، `surface-3`
- **Text**: `text`، `text-muted`، `text-inverted`
- **Border**: `border`، `border-strong`
- **Primary / Accent**: `primary`، `primary-hover`، `primary-pressed`
- **Status**: `success`, `warning`, `danger`, `info`

#### تم‌ها

- **Dark-first (پیشنهادی)**: پس‌زمینه تیره، سطح‌های نیمه‌شفاف، تاکید با یک Accent.
- **Light mode** اختیاری، اما اگر فعال شد باید کامل باشد.

---

### تایپوگرافی

#### فونت و قواعد

- فونت اصلی: **IRANSansX**
- fallback فقط در صورت نبود فایل فونت.
- استفاده از **نیم‌فاصله** مطابق قواعد فارسی.

#### مقیاس پیشنهادی

| Token     | اندازه  | کاربرد          |
| --------- | ------- | --------------- |
| `text-xs` | 12px    | توضیحات ریز/متا |
| `text-sm` | 14px    | متن ثانویه      |
| `text-md` | 16px    | متن اصلی        |
| `text-lg` | 18px    | تیتر درون‌صفحه  |
| `text-xl` | 20–24px | تیتر صفحه       |

#### ارتفاع خط

- متن‌های طولانی: line-height حدود 1.8
- تیترها: 1.2 تا 1.4

---

### فاصله‌گذاری و شبکه

#### Scale فاصله

مقیاس ۴px:

- `space-1 = 4px`
- `space-2 = 8px`
- `space-3 = 12px`
- `space-4 = 16px`
- `space-6 = 24px`
- `space-8 = 32px`
- `space-10 = 40px`
- `space-12 = 48px`

#### Grid و Container

- Mobile: padding افقی 16px
- Tablet: 24px
- Desktop: 32px
- حداکثر عرض محتوا: 1200–1280px

---

### لبه‌ها، سایه و شیشه‌ای

#### Radius

- `radius-sm`: 8px
- `radius-md`: 12px
- `radius-lg`: 16px

#### Shadow

- سایه ظریف و کم‌عمق
- در Dark mode، کنتراست سطح‌ها مهم‌تر از سایه است

#### Glassmorphism

- Blur کنترل‌شده
- حفظ خوانایی متن
- روی دستگاه‌های ضعیف fallback (کاهش یا حذف blur)

---

### آیکون و تصویر

- آیکون‌ها یک سبک واحد داشته باشند (Stroke/Fill، ضخامت، گوشه‌ها).
- آیکون‌های جهت‌دار RTL-aware.
- تصاویر:
  - Lazy-load
  - سایزبندی صحیح
  - فرمت‌های بهینه (WebP/AVIF در صورت امکان)

---

## کامپوننت‌ها و الگوهای UI

### دکمه‌ها

#### انواع

- `Primary` — اقدام اصلی (CTA)
- `Secondary` — اقدام ثانویه
- `Tertiary/Ghost` — اقدام کم‌اهمیت
- `Danger` — عملیات مخرب

#### اندازه‌ها

- `sm`: ارتفاع 32px
- `md`: ارتفاع 40px (پیش‌فرض)
- `lg`: ارتفاع 48px (CTA در موبایل)

#### قوانین رفتار

- در هر صفحه فقط یک CTA اصلی (مگر موارد خاص).
- Disabled هم از نظر رنگ هم cursor/aria مشخص باشد.
- در Loading متن ثابت بماند یا با Spinner جایگزین شود.
- عرض دکمه در Loading ثابت بماند تا UI نلرزد.

#### Focus

- Focus-visible واضح برای کیبورد.

---

### ورودی‌ها و فرم‌ها

- Label همیشه وجود داشته باشد (Placeholder جای Label نیست).
- پیام خطا کوتاه و عملی.
- States: default, focus, error, disabled.
- انتخابگرهای طولانی حتما جست‌وجو داشته باشند.

---

### کارت‌ها

- Padding استاندارد
- سطح مشخص + hover subtle
- اگر قابل کلیک است، کل کارت clickable باشد

---

### مودال/دیالوگ

- Trap focus
- Escape برای بستن
- Close button مشخص
- عملیات مخرب دارای دکمهٔ Danger

---

### Toast/Notification

- پیام‌های کوتاه و واضح
- زمان نمایش 3–5 ثانیه
- خطاها stack trace نمایش ندهند

---

### Navigation/Layout

- Breadcrumb در صفحات عمیق
- Mobile: Bottom Nav یا Hamburger
- Desktop: سایدبار یا Top Nav ثابت
- RTL-aware

---

### جدول و لیست

- جدول‌ها: هدر ثابت (در صورت اسکرول)، فیلتر/مرتب‌سازی قابل دسترس، Empty/Loading استاندارد
- لیست‌ها: داده زیاد = Virtualization، موبایل = Card/Row فشرده

---

## تعامل، انیمیشن و Motion

### اصول

- انیمیشن کمک‌کننده باشد، نه تزئینی.
- اولویت با کارایی و کاهش حواس‌پرتی.

### مدت‌زمان‌ها

- Micro interactions: 120–200ms
- Transitions: 200–300ms
- Modal enter/exit: 180–240ms

### Reduced Motion

- اگر `prefers-reduced-motion` فعال است، انیمیشن‌ها کاهش یابند یا خاموش شوند.

---

## Responsive و Mobile-first

### Breakpoints پیشنهادی

- `sm`: 360–480
- `md`: 768
- `lg`: 1024
- `xl`: 1280
- `2xl`: 1536

### قوانین

- Mobile-first: ابتدا موبایل، سپس توسعه به دسکتاپ.
- Touch target: حداقل 44×44px.
- فرم‌ها در موبایل تک‌ستونه باشند.

---

## دسترسی‌پذیری

### الزامات کلیدی

- **Keyboard first:** مسیرهای اصلی فقط با کیبورد قابل انجام باشند.
- **Focus visible:** فوکوس واضح باشد.
- **Semantic HTML:** استفاده از عناصر درست.
- **ARIA:** فقط وقتی لازم است و درست.
- **کنتراست:** متن روی پس‌زمینه حداقل AA.
- **فرم‌ها:** هر input باید label مرتبط داشته باشد.

### RTL و دسترسی‌پذیری

- ترتیب Tab منطقی باشد.
- آیکون‌های جهت‌دار RTL-aware.

---

## استانداردهای فنی

### TypeScript

- `strict: true`
- ممنوعیت `any` (جز موارد استثنایی با توضیح و Ticket)
- استفاده از `unknown` به جای `any` در ورودی‌های نامطمئن
- تعریف type برای تمام ورودی/خروجی‌های public

### Code Style

- ESLint و Prettier باید بدون خطا پاس شوند.
- Naming:
  - Components: PascalCase
  - Functions/Vars: camelCase
  - Types/Interfaces: PascalCase
  - Constants: UPPER_SNAKE_CASE
  - Files: kebab-case

### Architecture

- SOLID + Separation of Concerns
- لایه‌ها:
  - `domain/` (منطق کسب‌وکار)
  - `ui/` (نمایش)
  - `data/` (خواندن/نوشتن)

### Error Handling

- خطاها قابل پیگیری باشند (logging داخلی).
- پیام خطا برای کاربر قابل فهم باشد.
- خطا دارای fallback باشد.
- از error code/type استفاده شود، نه string خام.

### Performance

- Code splitting و lazy loading برای مسیرهای سنگین
- Performance Budget تعریف شود (حداکثر وزن باندل اولیه)
- تصاویر بهینه + lazy-load

---

## امنیت، حریم خصوصی و داده

- هیچ فایل کاربر بدون رضایت صریح ارسال نشود.
- اگر لاگ یا گزارش خطا داریم، دادهٔ حساس حذف/ماسک شود.
- از ذخیره دائم فایل‌های پردازش‌شده در کلاینت خودداری شود مگر با تصمیم صریح.
- در صورت نیاز به analytics، فقط نسخه self-host و با اعلام شفاف.

---

## تست، کیفیت و تعریف Done

### الزامات تست

- Unit test برای منطق حیاتی
- Integration test برای مسیرهای اصلی
- Coverage حداقل 80% برای بخش‌های منطقی

### تعریف Done (DoD)

یک PR زمانی Done است که:

- [ ] UI فارسی، RTL و با فونت پروژه درست کار کند
- [ ] هیچ درخواست خارجی در runtime اضافه نشده باشد
- [ ] TypeScript بدون خطا کامپایل شود
- [ ] ESLint/Prettier پاس شود
- [ ] تست‌ها پاس شوند و coverage افت نکند
- [ ] حالت‌های Loading/Error/Empty طراحی شده باشد
- [ ] دسترسی‌پذیری پایه رعایت شده باشد
- [ ] مستندات لازم به‌روزرسانی شده باشد

---

## چک‌لیست بازبینی PR

### UI/UX

- [ ] کامپوننت طبق Design System ساخته شده؟
- [ ] RTL و فارسی صحیح است؟
- [ ] حالات Hover/Focus/Disabled/Loading پیاده شده؟

### فنی

- [ ] strict TS فعال است؟
- [ ] Coverage کافی است؟
- [ ] lint/format پاس شده؟

---

## پیوست‌ها

### A. اسکلت توکن‌ها

```css
:root {
  --font-family: 'IRANSansX', sans-serif;
  --space-2: 8px;
  --space-4: 16px;
  --radius-md: 12px;
  --motion-medium: 240ms;
}
```
